# ğŸ™ï¸ MicroserviÃ§o de TranscriÃ§Ã£o de VÃ­deos

## ğŸ“Œ VisÃ£o Geral
O **MicroserviÃ§o de TranscriÃ§Ã£o de VÃ­deos** Ã© responsÃ¡vel por baixar vÃ­deos, extrair Ã¡udio e realizar a transcriÃ§Ã£o do conteÃºdo falado. Esse serviÃ§o opera de forma assÃ­ncrona, consumindo mensagens de uma fila RabbitMQ e publicando as transcriÃ§Ãµes processadas de volta na fila de resposta.

## âš™ï¸ Tecnologias Utilizadas
- **Linguagem:** Python 3.10
- **Framework Web:** FastAPI
- **TranscriÃ§Ã£o:** OpenAI Whisper
- **Download de VÃ­deos:** yt-dlp
- **Mensageria:** RabbitMQ
- **Gerenciamento de DependÃªncias:** `requirements.txt`

## ğŸ“‚ Estrutura do Projeto

```
.
â”œâ”€â”€ README.MD
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ application
â”‚   â”‚   â”œâ”€â”€ dtos
â”‚   â”‚   â”‚   â”œâ”€â”€ download_and_transcribe_dto.py
â”‚   â”‚   â””â”€â”€ use_cases
â”‚   â”‚       â”œâ”€â”€ downloader.py
â”‚   â”‚       â”œâ”€â”€ fetch_and_transcribe.py
â”‚   â”‚       â””â”€â”€ transcriber.py
â”‚   â”œâ”€â”€ config
â”‚   â”‚   â””â”€â”€ settings.py
â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”œâ”€â”€ download.py
â”‚   â”‚   â””â”€â”€ transcription.py
â”‚   â”œâ”€â”€ infrastructure
â”‚   â”‚   â”œâ”€â”€ interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ downloader.py
â”‚   â”‚   â”‚   â”œâ”€â”€ message_broker.py
â”‚   â”‚   â”‚   â””â”€â”€ transcriber.py
â”‚   â”‚   â”œâ”€â”€ rabbitmq.py
â”‚   â”‚   â”œâ”€â”€ whisper.py
â”‚   â”‚   â””â”€â”€ youtube_downloader.py
â”‚   â”œâ”€â”€ main.py
```

## ğŸ”„ Fluxo de Funcionamento
1. **RecepÃ§Ã£o de Mensagem:** O microserviÃ§o recebe uma URL de vÃ­deo atravÃ©s de uma fila RabbitMQ.
2. **Download do Ãudio:** O serviÃ§o baixa o Ã¡udio do vÃ­deo utilizando `yt-dlp`.
3. **TranscriÃ§Ã£o do Ãudio:** O Ã¡udio Ã© processado pelo Whisper para gerar o texto transcrito.
4. **PublicaÃ§Ã£o da TranscriÃ§Ã£o:** O texto transcrito Ã© publicado na fila de resposta RabbitMQ.
5. **Retorno ao UsuÃ¡rio:** O backend consome a resposta e retorna a transcriÃ§Ã£o ao usuÃ¡rio.

## ğŸ“„ ConfiguraÃ§Ã£o de VariÃ¡veis de Ambiente

Crie um arquivo **.env.exemplo** com as seguintes configuraÃ§Ãµes:

```env
# ConfiguraÃ§Ã£o do RabbitMQ
RABBIT_HOST="localhost"
RABBIT_PORT=5672
RABBIT_USER="guest"
RABBIT_PASSWORD="guest"
RABBIT_URI="amqp://${RABBIT_HOST}:${RABBIT_PORT}"
```

## ğŸš€ Como Executar o MicroserviÃ§o

### 1. Clonar o RepositÃ³rio
```bash
git clone https://github.com/joaogabriel1995/echoText.git
cd speakly-transcriber
```

### 2. Criar um ambiente virtual e instalar dependÃªncias
```bash
python -m venv venv
source venv/bin/activate  # No Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 3. Configurar as variÃ¡veis de ambiente
Crie um arquivo **.env** e adicione as configuraÃ§Ãµes necessÃ¡rias:
```env
RABBITMQ_URL=amqp://user:password@localhost:5672/
```

### 4. Executar o ServiÃ§o
```bash
python src/main.py
```

## ğŸ›  Fila de Mensagens
O microserviÃ§o opera de forma assÃ­ncrona atravÃ©s de filas do RabbitMQ:
- **Fila de Entrada:** `transcription-queue` (recebe URLs para processar)
- **Fila de SaÃ­da:** `transcription-response-queue` (retorna o texto transcrito)

